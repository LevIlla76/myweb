<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Date</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&display=swap" rel="stylesheet">
</head>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: pink;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* สร้างการเคลื่อนไหวของหัวใจ */
        @keyframes heartFall {
            0% {
                opacity: 1;
                transform: translateY(50) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .heart-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .heart-background .heart {
            position: absolute;
            font-size: 120px;
            color: rgba(255, 0, 0, 0.485);
            top: -100px;
            left: 50%;
            animation: heartFall 10s infinite ease-in;
            opacity: 1;
            will-change: transform;
        }

        .container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 1000px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .image-container {
            padding: 25px;
    flex: 1;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    height: 100%;
}

.img-style {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    padding: 40px;
    width: 80%;
    height: 80%;
    object-fit: cover;
}



        .form-container {
            flex: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%; /* เพิ่มความสูงให้เต็มพื้นที่ */
        }

        h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2rem; /* ปรับขนาดตามต้องการ */
    font-weight: bold;
    color: rgb(255, 165, 165);
}

        .input-container {
            position: relative;
            width: 80%;
            max-width: 400px; /* จำกัดความกว้างของช่องกรอก */
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
        }

        input[type="text"] {
            padding: 18px 20px 18px 40px; /* เพิ่มพื้นที่ทางซ้ายสำหรับไอคอน */
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 10px;
            border: 2px solid #ddd;
            margin-bottom: 20px;
            width: 100%;
            text-align: left;
            color: white;
            background-color: #f9f9f9;
            transition: all 0.3s ease;
            text-align: center;
        }

        input[type="text"]:not(:focus) {
            background-color: pink;
            border-color: pink;
        }

        input[type="text"]:focus {
            border-color: pink;
            background-color: pink;
            box-shadow: 0 0 5px rgba(255, 99, 71, 0.5);
            outline: none;
        }

        .lock-icon {
            position: absolute;
            left: 15px;
            top: 38%;
            transform: translateY(-50%); /* ให้ไอคอนอยู่กลาง */
            color: #ffffff;
            font-size: 1.5rem;
        }

        .button-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .number-button {
            padding: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 50%;
            border: 1px solid #ddd;
            background-color: pink;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            width: 60px;
            height: 60px;
            margin: 0 auto;
        }

        .number-button:hover {
            background-color: #ddd;
        }

        button {
            padding: 10px 20px;
            font-size: 1.5rem;
            border: none;
            background-color: rgb(250, 137, 137);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            width: 100%;
        }

        button:hover {
            background-color: darkred;
        }

        .message {
            font-size: 1.2rem;
            font-weight: bold;
            color: red;
            margin-top: 20px;
            text-align: center;
        }

        .reset-btn {
            background-color: rgb(229, 155, 75);
            font-weight: bold;
            margin-top: 10px;
        }

        .confirm-btn {      
            font-weight: bold;    
        }

        .reset-btn:hover {
            background-color: rgb(229, 155, 75);
        }
    </style>
</head>
<body>

    <audio id="backgroundMusic" autoplay loop>
        <source src="/assets/myflower.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="heart-background" id="heart-background">
        <!-- หัวใจจะถูกเพิ่มที่นี่ -->
    </div>   

    <div class="container">
        <div class="image-container">
            <img src="./assets/11.png" alt="image" class="img-style">
        </div>
        <div class="form-container">
            <h2>First time we were lovers</h2>
            <div class="input-container">
                <!-- ไอคอนแม่กุญแจอยู่ในช่อง input -->
                <i class="fas fa-lock lock-icon"></i>
                <input type="text" id="password" readonly>
            </div>
            <div class="button-row">
                <div class="number-button" data-value="1">1</div>
                <div class="number-button" data-value="2">2</div>
                <div class="number-button" data-value="3">3</div>
                <div class="number-button" data-value="4">4</div>
                <div class="number-button" data-value="5">5</div>
                <div class="number-button" data-value="6">6</div>
                <div class="number-button" data-value="7">7</div>
                <div class="number-button" data-value="8">8</div>
                <div class="number-button" data-value="9">9</div>
                <div class="number-button" data-value="*">*</div>
                <div class="number-button" data-value="0">0</div>
                <div class="number-button" data-value="#">#</div>
            </div>
            <button id="submitBtn" class="confirm-btn">Confirm</button>
            <button id="resetBtn" class="reset-btn" style="display: none;">Try Again</button> <!-- ปุ่มกรอกใหม่ -->
            <div class="message" id="message"></div>
        </div>
    </div>

    <script>

        // ฟังก์ชันสำหรับสุ่มตำแหน่ง
        function randomPosition() {
            const leftPosition = Math.random() * 120; // สุ่มตำแหน่งแนวนอน
    return { top: '-130px', left: leftPosition + '%' }; // เริ่มจากขอบบนสุด
}

function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    const position = randomPosition();
    heart.style.top = position.top;
    heart.style.left = position.left;
    heart.style.animationDuration = `${Math.random() * 5 + 7}s`; // สุ่มระยะเวลาตก (3-6 วินาที)
    heart.innerHTML = '&#10084;';
    document.getElementById('heart-background').appendChild(heart);

            // เมื่อหัวใจตกเสร็จแล้ว ให้สร้างหัวใจใหม่
            heart.addEventListener('animationiteration', () => {
                heart.remove();
            });
        }

        // สร้างหัวใจใหม่ทุกๆ 0.5 วินาที
        setInterval(createHeart, 1500);

        

         // เริ่มเล่นเพลงเมื่อหน้าโหลดเสร็จ
         document.addEventListener("DOMContentLoaded", function() {
            const audio = document.getElementById("backgroundMusic");

             audio.volume = 0.2;

            // พยายามเล่นเพลงอัตโนมัติ
            audio.play().catch(error => {
                console.log("Autoplay prevented, waiting for user interaction.");
            });

            // ถ้าถูกบล็อก ให้คลิกที่หน้าเพื่อเริ่มเล่น
            document.body.addEventListener("click", function() {
                if (audio.paused) {
                    audio.play();
                }
            }, { once: true });
        });

        const audio = document.getElementById("backgroundMusic");

    // ฟังก์ชันในการบันทึกตำแหน่งปัจจุบันของเพลง
    function saveCurrentTime() {
        localStorage.setItem("audioTime", audio.currentTime);
    }

    // ฟังก์ชันเพื่อเริ่มเล่นเพลงจากตำแหน่งที่บันทึกไว้
    function loadAudioTime() {
        const savedTime = localStorage.getItem("audioTime");
        if (savedTime) {
            audio.currentTime = savedTime;
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        loadAudioTime(); // โหลดตำแหน่งเพลงเมื่อหน้าโหลด

        // พยายามเล่นเพลงอัตโนมัติ
        audio.play().catch(error => {
            console.log("Autoplay prevented, waiting for user interaction.");
        });

        // ถ้าถูกบล็อก ให้คลิกที่หน้าเพื่อเริ่มเล่น
        document.body.addEventListener("click", function() {
            if (audio.paused) {
                audio.play();
            }
        }, { once: true });

        // ตั้งค่าบันทึกตำแหน่งทุก 1 วินาที
        setInterval(saveCurrentTime, 1000); // ทุก 1 วินาที
    });


        const submitBtn = document.getElementById('submitBtn');
        const resetBtn = document.getElementById('resetBtn');
        const passwordInput = document.getElementById('password');
        const message = document.getElementById('message');

        const correctCode = '26052023';
        let attempts = 0; // ตัวแปรเก็บจำนวนครั้งที่กรอกรหัสผิด

        const numberButtons = document.querySelectorAll('.number-button');
        numberButtons.forEach(button => {
            button.addEventListener('click', () => {
                passwordInput.value += button.dataset.value;
            });
        });

        submitBtn.addEventListener('click', () => {

            const enteredCode = passwordInput.value;

            if (enteredCode === correctCode) {
                message.style.color = 'green';
                message.textContent = 'You are my Valentine!';
                passwordInput.disabled = true;
                submitBtn.disabled = true;
                resetBtn.style.display = 'none';  // ซ่อนปุ่มกรอกใหม่เมื่อรหัสถูกต้อง
                attempts = 0; // รีเซ็ตจำนวนครั้งเมื่อกรอกถูก

                window.location.href = 'together.html';

            } else {
                attempts++; // เพิ่มจำนวนครั้งที่กรอกรหัสผิด

                message.style.color = 'red';

                if (attempts === 1) {
                    message.textContent = 'ทำไมจำผิด';
                } else if (attempts === 2) {
                    message.textContent = 'เอาดีๆ';
                } else if (attempts === 3) {
                    message.textContent = 'เสียใจอ่ะ';
                } else if (attempts === 3) {
                    message.textContent = 'จะร้องไห้ละแค่นี้ก็จำไม่ได้';
                }
                else if (attempts === 4) {
                    message.textContent = 'เสียใจมากๆ';
                }
                else if (attempts === 5) {
                    message.textContent = 'ใบ้ๆ ยี่ห้าสาม';
                }
                else if (attempts === 6) {
                    message.textContent = 'ไม่รู้จริงอ่ะ';
                }
                else if (attempts === 7) {
                    message.textContent = 'หมดกันความรัก 2 ปี';
                }
                else if (attempts === 8) {
                    message.textContent = 'ออกไปเลยป่ะ';
                }
                

                resetBtn.style.display = 'inline-block';  // แสดงปุ่มกรอกใหม่เมื่อรหัสผิด
            }
        });

        // เมื่อคลิกปุ่มกรอกใหม่
        resetBtn.addEventListener('click', () => {
            passwordInput.value = '';  // รีเซ็ตช่องกรอก
            message.textContent = '';  // รีเซ็ตข้อความ
            passwordInput.disabled = false;
            submitBtn.disabled = false;
            resetBtn.style.display = 'none';  // ซ่อนปุ่มกรอกใหม่
        });
    </script>
</body>
</html>
